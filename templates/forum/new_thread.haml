-extends "base.haml"
-load static
-load compress

-block head
  -compress css
    %link{rel: "stylesheet", href: "{% static 'css/new_thread.css' %}" }

-block content
  .panel.panel-primary#main-panel
    .panel-heading.carot
      %span.glyphicon.glyphicon-plus
      Créer un nouveau Sujet
    .panel-body
      %form{:action => '/forum/write/', :method => 'post'} {% csrf_token %}

      %div
        %label{:for => 'title'} Titre
        %input.form-control#title-tf{:type => 'text', :name => 'title', :aria-describedby => 'basic-addon3'}

        #radiobtns
          %span.radio
              %label
                  %input#pvt-vis{:type => 'radio', :name => 'visibility', :checked => ''} Privé
          %span.radio
              %label
                  %input#class-vis{:type => 'radio', :name => 'visibility'} Classe
          %span.radio
              %label
                  %input#public-vis{:type => 'radio', :name => 'visibility'} Public

        %div#visibdata
          %label#visibdatalabel{:for => 'visibdata'} Destinataire
          %input.form-control{:type => 'text', :name => 'visibdata', :aria-describedby => 'basic-addon3'}


        %div
          %label{:for => 'skills'} Compétences
          %input.form-control#skills-tf{:type => 'text', :name => 'skills', :aria-describedby => 'basic-addon3'}

        %div
          %label{:for => 'content'} Message
          %textarea.form-control#content{:rows => '8', :name => 'content'}

        .pull-right
          %button.btn.btn-lg.pull-right.carot#validb{:type => 'submit', :value => 'Submit'} Valider

-block javascript
  :javascript
    $(document).ready( function() {

      $("#radiobtns").click(function() {

        if ($("#public-vis").is(":checked")) {
          $("#visibdata").hide()
        } else if ($("#pvt-vis").is(":checked")) {
          $(visibdatalabel).text("Destinataire")
          $("#visibdata").show()
        } else if ($("#class-vis").is(":checked")) {
            $(visibdatalabel).text("Classe")
            $("#visibdata").show()
        }
      })
    })
